{% extends "base.html" %}

{% load bootstrap5 %}

{% block content %}
<h1>Todo List</h1>

<table class="table">
    <thead>
        <tr>
            <th>Content</th>
            <th>Created At</th>
            <th>Deadline</th>
            <th>Done</th>
            <th>Tags</th>
            <th>Update</th>
            <th>Delete</th>
            <th>Complete/Undo</th>
        </tr>
    </thead>
    <tbody>
        {% for todo in object_list %}
        <tr>
            <td>{{ todo.content }}</td>
            <td>{{ todo.created_at }}</td>
            <td>{{ todo.deadline }}</td>
            <td>{{ todo.done }}</td>
            <td>
                {% for tag in todo.tags.all %}
                    {{ tag.name }}
                {% endfor %}
            </td>
            <td>
                <a class="btn btn-primary" href="{% url 'todo_update' todo.id %}">Update</a>
            </td>
            <td>
                <a class="btn btn-danger" href="{% url 'todo_delete' todo.id %}">Delete</a>
            </td>
            <td>
                {% if not todo.done %}
                    <form method="post" action="{% url 'todo_complete' todo.id %}">
                        {% csrf_token %}
                        <button class="btn btn-success" type="submit">Complete</button>
                    </form>
                {% else %}
                    <form method="post" action="{% url 'todo_undo' todo.id %}">
                        {% csrf_token %}
                        <button class="btn btn-warning" type="submit">Undo</button>
                    </form>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<a class="btn btn-success" href="{% url 'todo_create' %}">Add New Task</a>

{% endblock %}
